{{define "title"}}Introspect - Guestbook{{end}}

{{define "content"}}
<div class="space-y-6">
  <!-- Page Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-4xl font-bold bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent">
        Guestbook
      </h1>
      <p class="text-gray-400 mt-2">Leave your mark with a guestbook entry</p>
    </div>

    <!-- Database Backend Switcher -->
    <div class="glass rounded-xl p-4">
      <div class="flex items-center space-x-4">
        <span class="text-sm font-medium text-gray-300">Database Backend:</span>
        <form action="/guestbook/switch" method="post" id="dbSwitchForm" class="flex items-center space-x-3">
          <!-- MongoDB Option -->
          <label class="flex items-center cursor-pointer group">
            <input type="radio" name="backend" value="mongodb" {{if eq .Backend "mongodb" }}checked{{end}}
              onchange="document.getElementById('dbSwitchForm').submit()" class="sr-only peer">
            <div class="flex items-center px-4 py-2 rounded-lg border-2 transition-all duration-200
              peer-checked:border-green-500 peer-checked:bg-green-500/10
              border-gray-600 hover:border-gray-500">
              <svg class="w-5 h-5 mr-2 transition-colors peer-checked:text-green-400 text-gray-400" fill="currentColor"
                viewBox="0 0 24 24">
                <path
                  d="M17.193 9.555c-1.264-5.58-4.252-7.414-4.573-8.115-.28-.394-.53-.954-.735-1.44-.036.495-.055.685-.523 1.184-.723.566-4.438 3.682-4.74 10.02-.282 5.912 4.27 9.435 4.888 9.884l.07.05A73.49 73.49 0 0111.91 24h.481c.114-1.032.284-2.056.51-3.07.417-.296.604-.463.85-.693a11.342 11.342 0 003.639-8.464c.01-.814-.103-1.662-.197-2.218zm-5.336 8.195s0-8.291.275-8.29c.213 0 .49 10.695.49 10.695-.381-.045-.765-1.76-.765-2.405z" />
              </svg>
              <span
                class="text-sm font-medium transition-colors peer-checked:text-green-400 text-gray-300">MongoDB</span>
            </div>
          </label>

          <!-- etcd Option -->
          <label class="flex items-center cursor-pointer group">
            <input type="radio" name="backend" value="etcd" {{if eq .Backend "etcd" }}checked{{end}}
              onchange="document.getElementById('dbSwitchForm').submit()" class="sr-only peer">
            <div class="flex items-center px-4 py-2 rounded-lg border-2 transition-all duration-200
              peer-checked:border-emerald-500 peer-checked:bg-emerald-500/10
              border-gray-600 hover:border-gray-500">
              <svg class="w-5 h-5 mr-2 transition-colors peer-checked:text-emerald-400 text-gray-400"
                fill="currentColor" viewBox="160 340 100 110">
                <path d="M203.144,398.853c0,3.24-2.628,5.863-5.863,5.863c-3.237,0-5.858-2.623-5.858-5.863
                  c0-3.226,2.622-5.859,5.858-5.859C200.516,392.993,203.144,395.627,203.144,398.853z" />
                <path d="M210.722,398.853c0,3.244,2.624,5.864,5.863,5.864c3.235,0,5.863-2.62,5.863-5.864
                  c0-3.228-2.628-5.859-5.863-5.859C213.346,392.993,210.722,395.625,210.722,398.853z" />
                <path d="M250.623,405.212c-0.425,0.034-0.845,0.049-1.295,0.049c-2.616,0-5.152-0.612-7.441-1.732
                  c0.76-4.374,1.086-8.775,1.002-13.163c-2.482-3.592-5.317-6.977-8.519-10.095c1.389-2.604,3.444-4.845,6.003-6.43l1.102-0.683
                  l-0.86-0.971c-4.417-4.97-9.686-8.815-15.666-11.426l-1.192-0.518l-0.303,1.257c-0.714,2.936-2.202,5.585-4.248,7.711
                  c-3.931-2.088-8.038-3.777-12.274-5.056c-4.226,1.276-8.329,2.96-12.256,5.048c-2.04-2.123-3.522-4.768-4.231-7.694l-0.308-1.261
                  l-1.188,0.516c-5.901,2.571-11.319,6.521-15.665,11.422l-0.859,0.971l1.1,0.682c2.556,1.58,4.6,3.808,5.989,6.396
                  c-3.19,3.108-6.026,6.484-8.504,10.058c-0.096,4.383,0.212,8.818,0.976,13.25c-2.278,1.11-4.798,1.717-7.396,1.717
                  c-0.455,0-0.883-0.015-1.298-0.049L162,405.11l0.12,1.29c0.636,6.522,2.658,12.729,6.026,18.442l0.656,1.117l0.984-0.838
                  c2.287-1.938,5.047-3.222,7.985-3.738c1.937,3.956,4.229,7.676,6.834,11.13c4.152,1.452,8.479,2.538,12.949,3.184
                  c0.429,2.952,0.087,6.009-1.078,8.835l-0.492,1.198l1.264,0.28c3.236,0.714,6.501,1.073,9.702,1.073l9.7-1.073l1.265-0.28
                  l-0.49-1.198c-1.165-2.826-1.509-5.888-1.075-8.845c4.448-0.645,8.758-1.728,12.897-3.174c2.607-3.454,4.903-7.179,6.839-11.14
                  c2.948,0.512,5.727,1.796,8.025,3.742l0.985,0.834l0.657-1.108c3.37-5.726,5.395-11.93,6.019-18.441l0.12-1.289L250.623,405.212z
                   M220.815,420.975c-4.592,1.245-9.25,1.875-13.882,1.875c-4.648,0-9.301-0.63-13.893-1.875c-2.52-3.914-4.512-8.108-5.944-12.524
                  c-1.429-4.397-2.265-9-2.508-13.741c2.968-3.668,6.34-6.881,10.067-9.583c3.787-2.754,7.905-4.993,12.278-6.679
                  c4.365,1.686,8.477,3.919,12.253,6.661c3.74,2.72,7.129,5.956,10.111,9.649c-0.256,4.712-1.104,9.291-2.531,13.68
                  C225.334,412.854,223.335,417.061,220.815,420.975z" />
              </svg>
              <span
                class="text-sm font-medium transition-colors peer-checked:text-emerald-400 text-gray-300">etcd</span>
            </div>
          </label>

          <!-- Valkey Option -->
          <label class="flex items-center cursor-pointer group">
            <input type="radio" name="backend" value="valkey" {{if eq .Backend "valkey" }}checked{{end}}
              onchange="document.getElementById('dbSwitchForm').submit()" class="sr-only peer">
            <div class="flex items-center px-4 py-2 rounded-lg border-2 transition-all duration-200
              peer-checked:border-red-500 peer-checked:bg-red-500/10
              border-gray-600 hover:border-gray-500">
              <svg class="w-5 h-5 mr-2 transition-colors peer-checked:text-red-400 text-gray-400" fill="currentColor"
                viewBox="0 0 64 73">
                <path
                  d="M 13.482285 60.694962 L 0.998384 52.884399 L 0.998384 19.502914 L 31.527868 2.001205 L 61.317604 19.532024 L 61.317604 54.64489 L 31.054855 71.68927 L 20.548372 65.115807 L 20.548372 51.041328 L 20.548372 49.119896 L 14.851504 45.555508 L 14.851504 27.453159 L 31.346497 17.99712 L 47.464485 27.482262 L 47.464485 46.451157 L 34.703495 53.638138 L 34.703495 45.998573 C 38.52874 44.52552 41.274452 40.739189 41.274452 36.270489 C 41.274452 30.510658 36.712814 25.88438 31.158138 25.88438 C 25.603172 25.88438 21.041817 30.510658 21.041817 36.270489 C 21.041817 40.739189 23.787249 44.52552 27.612494 45.998573 L 27.612494 60.473576 L 31.261133 62.756348 L 53.635483 50.15464 L 53.635483 23.924595 L 31.477489 10.884869 L 8.680504 23.953705 L 8.680504 48.628967 L 13.482285 51.633297 L 13.482285 60.694962 Z M 31.158138 31.498383 C 33.671822 31.498383 35.660439 33.664162 35.660439 36.270489 C 35.660439 38.876804 33.671822 41.042587 31.158138 41.042587 C 28.644447 41.042587 26.655558 38.876804 26.655558 36.270489 C 26.655558 33.664162 28.644447 31.498383 31.158138 31.498383 Z" />
              </svg>
              <span class="text-sm font-medium transition-colors peer-checked:text-red-400 text-gray-300">Valkey</span>
            </div>
          </label>
        </form>
      </div>

      <!-- Status Indicator -->
      <div class="mt-2 flex items-center justify-end">
        <div class="flex items-center space-x-2">
          <div class="w-2 h-2 rounded-full {{if .Connected}}bg-green-400 animate-pulse{{else}}bg-red-400{{end}}"></div>
          <span class="text-xs text-gray-400">
            {{if .Connected}}Connected{{else}}Disconnected{{end}}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Guestbook Form -->
  <div class="glass rounded-2xl p-6">
    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
      <svg class="w-6 h-6 mr-3 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
        </path>
      </svg>
      New Entry
    </h2>

    <form action="/guestbook" method="post" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Name Input -->
        <div>
          <label for="name" class="block text-sm font-medium text-gray-300 mb-2">
            Your Name
          </label>
          <input type="text" list="name" name="name" id="name" placeholder="Enter your name"
            class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all">
          <datalist id="name">
            <option value="John Doe" />
            <option value="Louis XIV" />
            <option value="Ashoka the Great" />
          </datalist>
        </div>

        <!-- Comment Input -->
        <div>
          <label for="comment" class="block text-sm font-medium text-gray-300 mb-2">
            Your Comment
          </label>
          <input type="text" list="comment" name="comment" id="comment" placeholder="Leave a comment"
            class="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all">
          <datalist id="comment">
            <option value="My signature is my thumb" />
            <option value="I am the Sun King" />
            <option value="I was here 268 BCE" />
          </datalist>
        </div>
      </div>

      <!-- Submit Button -->
      <div>
        <button type="submit"
          class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-medium rounded-lg hover:from-green-600 hover:to-emerald-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-900 transform hover:scale-105 transition-all duration-200 shadow-lg shadow-green-500/30">
          <span class="flex items-center">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
            </svg>
            Submit Entry
          </span>
        </button>
      </div>
    </form>
  </div>

  <!-- Entries Table -->
  <div class="glass rounded-2xl p-6">
    <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
      <svg class="w-6 h-6 mr-3 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
        </path>
      </svg>
      Guestbook Entries
    </h2>

    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="border-b border-gray-700/50">
            <th class="py-3 px-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Time</th>
            <th class="py-3 px-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Name</th>
            <th class="py-3 px-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Comment</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-700/50">
          {{range $key, $value := .Entries}}
          <tr class="hover:bg-white/5 transition-colors group">
            <td class="py-3 px-4 text-sm text-gray-400 font-mono">{{$value.Date}}</td>
            <td class="py-3 px-4 text-sm font-medium text-gray-200">{{$value.Name}}</td>
            <td class="py-3 px-4 text-sm text-gray-300">{{$value.Comment}}</td>
          </tr>
          {{else}}
          <tr>
            <td colspan="3" class="py-8 text-center text-gray-500">
              <svg class="w-12 h-12 mx-auto mb-3 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
                </path>
              </svg>
              No entries yet. Be the first to sign the guestbook!
            </td>
          </tr>
          {{end}}
        </tbody>
      </table>
    </div>
  </div>
  <!-- Info Box -->
  <div class="glass rounded-2xl p-6 border-l-4 border-green-500">
    <div class="flex items-start">
      <svg class="w-6 h-6 text-green-400 mr-3 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <div>
        <h3 class="text-lg font-semibold text-white mb-2">About Guestbook</h3>
        <p class="text-gray-400 text-sm leading-relaxed">
          This is a classic Guestbook application demonstrating stateful data persistence. It supports switching between
          different storage backends to showcase how the application handles data in a distributed
          environment. It validates connectivity and data retrieval from the selected backend.
        </p>
      </div>
    </div>
  </div>
</div>
{{end}}

{{template "layout.html" .}}